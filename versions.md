# История версий (Changelog)

## v1.0.0 - Текущая версия (MVP)

### Основные функции
- **Архитектура Хост-Клиент:** Реализовано разделение на управляющее устройство (ПК/ТВ) и контроллеры игроков (Телефоны).
- **Сетевое взаимодействие:** Использование `BroadcastChannel` для мгновенной синхронизации состояния между вкладками браузера.
- **AI-Генерация контента:** Интеграция с Google Gemini API для создания уникальных категорий и вопросов на лету.

### Игровая механика
- **Структура игры:** 4 основных уровня + Финальный Блиц-турнир.
- **Голосование:** Игроки коллективно выбирают тему уровня из 4-х предложенных нейросетью.
- **Раунды:**
  - 8 вопросов в обычном уровне.
  - 12 вопросов в блиц-раунде.
- **Фазы вопроса:**
  1. *Вопрос:* На хосте отображается вопрос, на клиентах — варианты ответов. Таймер 8 секунд.
  2. *Ответ:* Игроки выбирают ответ.
  3. *Вскрытие (Reveal):* Хост показывает правильный ответ и "Интересный факт". Клиенты видят свой результат (верно/неверно).
  4. *Прогресс:* Ручной переход к следующему вопросу по нажатию кнопки "Продолжить" любым игроком.

### Технические улучшения
- **Защита от дублей:** Внедрен реестр заданных вопросов (`Set<string>`) и логика повторных запросов к API для исключения повторений в рамках одной сессии.
- **Стабилизация сети:**
  - Добавлен механизм `REQUEST_STATE` (активный опрос) для подключения игроков, присоединившихся после начала игры.
  - Фикс "спящих вкладок" через использование `useRef` для доступа к актуальному состоянию.
- **UI/UX:**
  - Единый стиль кнопок ответов на этапе выбора.
  - Цветовая индикация (Зеленый/Красный) на этапе результатов.
  - Таблица лидеров после каждого уровня и финальный экран победителя.

### Известные ограничения (To-Do)
- Работает только в пределах одного браузера (разные вкладки), так как используется `BroadcastChannel`. Для игры с реальных телефонов требуется внедрение WebSocket сервера (например, Socket.io) или WebRTC.
